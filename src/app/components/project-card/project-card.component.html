<div class="project-card" [class.visible]="visible">
  <div class="project-img" *ngIf="currentImage" (click)="openModal($event)">
    <img [src]="currentImage" [alt]="project.title" />
    
    <!-- Navigation arrows (only show if multiple images) -->
    <button *ngIf="hasMultipleImages" class="carousel-btn prev" (click)="prevImage($event)" aria-label="Previous image">
      ‹
    </button>
    <button *ngIf="hasMultipleImages" class="carousel-btn next" (click)="nextImage($event)" aria-label="Next image">
      ›
    </button>
    
    <!-- Dots indicator -->
    <div *ngIf="hasMultipleImages" class="carousel-dots">
      <span 
        *ngFor="let img of project.images; let i = index" 
        class="dot" 
        [class.active]="i === currentImageIndex"
        (click)="goToImage(i, $event)"
        [attr.aria-label]="'Go to image ' + (i + 1)">
      </span>
    </div>
  </div>
  <div class="project-info">
    <h3>{{ project.title }}</h3>
    <span class="project-year">{{ project.year }}</span>
    <p>{{ project.desc }}</p>
    <div class="project-tags">
      <span *ngFor="let t of project.tech" class="project-tag">{{ t }}</span>
    </div>
    <div class="project-links">
  <a *ngIf="project.demo" [href]="project.demo" target="_blank">Live Demo</a>
  <a *ngIf="project.github" [href]="project.github" target="_blank" aria-label="GitHub">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="white" class="github-icon">
      <path d="M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.2.8-.6v-2c-3.3.7-4-1.6-4-1.6-.5-1.2-1.2-1.5-1.2-1.5-1-.7.1-.7.1-.7 1 .1 1.6 1 1.6 1 .9 1.5 2.5 1 3 .8.1-.6.3-1 .5-1.2-2.7-.3-5.5-1.3-5.5-5.9 0-1.3.5-2.3 1.2-3.2 0-.3-.5-1.6.1-3.3 0 0 1-.3 3.3 1.2a11.4 11.4 0 0 1 6 0c2.2-1.5 3.2-1.2 3.2-1.2.6 1.7.2 3 .1 3.3.8.9 1.2 2 1.2 3.2 0 4.6-2.8 5.6-5.6 5.9.3.3.6.7.6 1.5v2.3c0 .4.2.7.8.6A12 12 0 0 0 12 .3"/>
    </svg>
  </a>
</div>

  </div>
</div>

<!-- Modal/Lightbox -->
<div class="modal-overlay" *ngIf="isModalOpen" (click)="closeModal($event)">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="modal-close" (click)="closeModal($event)" aria-label="Close modal">✕</button>
    
    <div class="modal-image-container">
      <img [src]="modalCurrentImage" [alt]="project.title" />
      
      <!-- Modal navigation arrows -->
      <button *ngIf="hasMultipleImages" class="modal-carousel-btn prev" (click)="prevModalImage($event)" aria-label="Previous image">
        ‹
      </button>
      <button *ngIf="hasMultipleImages" class="modal-carousel-btn next" (click)="nextModalImage($event)" aria-label="Next image">
        ›
      </button>
      
      <!-- Modal dots indicator -->
      <div *ngIf="hasMultipleImages" class="modal-carousel-dots">
        <span 
          *ngFor="let img of project.images; let i = index" 
          class="modal-dot" 
          [class.active]="i === modalImageIndex"
          (click)="goToModalImage(i, $event)"
          [attr.aria-label]="'Go to image ' + (i + 1)">
        </span>
      </div>
    </div>
    
    <div class="modal-info">
      <h3>{{ project.title }}</h3>
      <p>{{ project.desc }}</p>
    </div>
  </div>
</div>
